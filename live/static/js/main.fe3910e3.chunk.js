(this["webpackJsonpexcel-time-tracking"]=this["webpackJsonpexcel-time-tracking"]||[]).push([[0],{158:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},264:function(e,t){},312:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(26),i=n.n(s),c=(n(173),n(9)),o=n(10),d=n(12),u=n(11),l=(n(174),n(16)),h=n(20),j=function(){function e(){Object(c.a)(this,e),this._storage=window.localStorage,this._callbacks=[]}return Object(o.a)(e,[{key:"fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._storage.getItem(e);return n?JSON.parse(n):t}},{key:"update",value:function(e,t){this._storage.setItem(e,JSON.stringify(t))}},{key:"subscribe",value:function(e,t){var n=this._callbacks.push(e)-1;return console.log("subscribe",n,e.name,t),n}},{key:"unsubscribe",value:function(e,t){console.log("unsubscribe",e,t),delete this._callbacks[e]}},{key:"notify",value:function(){}}]),e}(),b=n(167),f=n(2),m=n.n(f),p=n(27),y=n(32),v=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)(this,n),(e=t.call(this,a)).start=void 0,e.end=void 0,e.comment=void 0,Object.assign(Object(y.a)(e),a),e}return Object(o.a)(n,[{key:"duration",get:function(){var e=this.getStartMoment(),t=this.getEndMoment();return m.a.duration(t.diff(e))}},{key:"getStartMoment",value:function(){var e=new Date,t=this.start.split(":"),n=Object(p.a)(t,2),a=n[0],r=n[1],s=parseInt(a,10),i=parseInt(r,10);return m()(e).hours(s).minutes(i)}},{key:"getEndMoment",value:function(){var e=new Date;if(!this.end){var t=new Date;return m()(e).hours(t.getHours()).minutes(t.getMinutes())}var n=this.end.split(":"),a=Object(p.a)(n,2),r=a[0],s=a[1],i=parseInt(r,10),c=parseInt(s,10);return m()(e).hours(i).minutes(c)}},{key:"finish",value:function(){this.end||(this.end=m()().format("HH:mm"))}},{key:"hash",value:function(){return[this.start,this.end,this.comment].join(".")}}]),n}(function(){function e(t){Object(c.a)(this,e),Object.assign(this,t)}return Object(o.a)(e,[{key:"assignProps",value:function(e){for(var t in e)e.hasOwnProperty(t)&&(console.log("this[",t,"] = ",e[t]),this[t]=e[t])}},{key:"toJson",value:function(){return JSON.stringify(this)}}]),e}()),O=n(161);function x(e){var t,n=(t="object"===typeof e?e:m.a.duration(e,"hours")).get("hours"),a=t.get("minutes");return n.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")}var g=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(c.a)(this,n),(a=t.call(this,e)).storage=void 0,a.storage=new j;var r=a.storage.fetch(a.key,[]).map((function(e){return new v(e)})).filter((function(e){return e.start}));return a.state={entries:r},a}return Object(o.a)(n,[{key:"key",get:function(){return"date."+m()(this.props.date).format("YYYY-MM-DD")+".entries"}},{key:"sumHoursString",get:function(){return this.sumTime.asHours().toFixed(2)}},{key:"sumTimeString",get:function(){return x(this.sumTime)}},{key:"sumHours",get:function(){return this.sumTime.asHours()}},{key:"sumTime",get:function(){return this.state.entries.reduce((function(e,t){return t.duration.add(e)}),m.a.duration(0))}},{key:"updateEntries",value:function(e){console.time("DayState WRITE "+this.key),this.storage.update(this.key,e),console.timeEnd("DayState WRITE "+this.key),this.setState({entries:e})}},{key:"updateOne",value:function(e){var t=this.state.entries,n=t.findIndex((function(t){return t===e}));-1!==n?(t[n]=e,this.updateEntries(t)):console.error("index in updateOne not found")}},{key:"remove",value:function(e){this.state.entries.splice(e,1),this.storage.update(this.key,this.state.entries),this.setState({entries:this.state.entries})}},{key:"hash",value:function(){return[this.props.date].concat(Object(b.a)(this.state.entries.map((function(e){return e.hash()})))).join(".")}},{key:"render",value:function(){return this.props.children(this)}}]),n}(r.a.Component),k=n(1),w=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).storage=void 0,a.state={},a.storage=new j,a.state.rate=a.storage.fetch("rate",50),a}return Object(o.a)(n,[{key:"setRate",value:function(e){this.setState({rate:e})}},{key:"getDay",value:function(e){return new g({date:e,children:function(e){return Object(k.jsx)(k.Fragment,{})}})}},{key:"render",value:function(){var e=this;return Object(k.jsx)(g,{date:this.props.date,children:function(t){return console.log(t.state.entries),e.props.children(t,e)}})}}]),n}(r.a.Component),D=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).storage=void 0,a.state={date:new Date},a.storage=new j,a.state.date=a.storage.fetch("date",a.state.date),a}return Object(o.a)(n,[{key:"setDate",value:function(e){console.log("setDate",m()(e).toISOString()),this.storage.update("date",e),this.setState({date:e})}},{key:"incDate",value:function(){this.setDate(m()(this.state.date).add(1,"day").toDate())}},{key:"decDate",value:function(){this.setDate(m()(this.state.date).subtract(1,"day").toDate())}},{key:"render",value:function(){return console.log("DateState render",m()(this.state.date).toISOString()),Object(k.jsx)(r.a.Fragment,{children:this.props.children(this.state.date,this.setDate.bind(this),this)},this.state.date.toString())}}]),n}(r.a.Component),S=n(49),E=n(162),N=(n(255),n(256),n(69)),C=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).context=void 0,e.state={focused:!1},e}return Object(o.a)(n,[{key:"isOutsideRange",value:function(e){return!!e.isAfter(m()().endOf("day"))}},{key:"isDayHighlighted",value:function(e){return this.props.day.state.entries.length>0}},{key:"render",value:function(){var e=this;return Object(k.jsx)("header",{className:"mb-3",children:Object(k.jsxs)(N.a,{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(k.jsx)(N.a.Brand,{className:"navbar-brand",children:Object(k.jsx)("a",{href:".",children:"excel-time-tracking"})}),Object(k.jsx)(E.SingleDatePicker,{date:this.props.date,onDateChange:function(t){return e.setDate(t)},focused:this.state.focused,onFocusChange:function(t){return e.setState({focused:t.focused})},id:"your_unique_id",isOutsideRange:this.isOutsideRange.bind(this),isDayHighlighted:this.isDayHighlighted.bind(this),initialVisibleMonth:function(){return m()().endOf("month")}}),Object(k.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(k.jsx)("span",{className:"navbar-toggler-icon"})}),Object(k.jsxs)(N.a.Collapse,{className:"collapse navbar-collapse justify-content-between",id:"navbarNav",children:[Object(k.jsx)("div",{}),Object(k.jsxs)("div",{className:"navbar-nav",children:[Object(k.jsx)(S.a,{className:["nav-link","/"===this.props.location.pathname?"active":""].join(" "),to:"/",children:"Home"}),Object(k.jsx)(S.a,{className:["nav-link","/report"===this.props.location.pathname?"active":""].join(" "),to:"/report",children:"Report"}),Object(k.jsx)(S.a,{className:["nav-link","/sap"===this.props.location.pathname?"active":""].join(" "),to:"/sap",children:"SAP"})]})]})]})})}},{key:"logout",value:function(e){}},{key:"setDate",value:function(e){console.log(e),this.props.setDate(e.toDate())}}]),n}(r.a.Component),H=Object(l.f)(C),R=n(67),I=r.a.createContext(void 0),M=n(307),Y=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).context=void 0,e}return Object(o.a)(n,[{key:"render",value:function(){var e=M.byCountry(),t=navigator.language.substr(3),n=e.get(t),a=this.props.rate,r=this.props.hours*a,s=new Intl.NumberFormat(void 0,{style:"currency",currency:n}).format(r);return Object(k.jsx)("span",{onClick:this.askPrice.bind(this),children:s})}},{key:"askPrice",value:function(){var e=prompt("Price per Hour?");if(e){var t=parseFloat(e);t&&this.context.setRate(t)}}}]),n}(r.a.Component);Y.contextType=I;var A=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).context=void 0,e.state={},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=m()(this.props.date).daysInMonth(),n=Array.from(new Array(t),(function(e,t){return t+1}));return Object(k.jsx)("div",{children:n.map((function(t){var n=m()(e.props.date).startOf("month").date(t),a=e.props.getDay(n.toDate());return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("h3",{children:[n.format("YYYY-MM-DD"),0===a.sumTime.asHours()?null:": "+a.sumTime.asHours().toFixed(2)+" h"]},t),Object(k.jsxs)(R.a,{as:"table",children:[Object(k.jsx)("tbody",{children:a.state.entries.map((function(e){return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:e.start}),Object(k.jsx)("td",{children:e.end}),Object(k.jsxs)("td",{children:[e.duration.asHours().toFixed(2)," ","h"]}),Object(k.jsx)("td",{children:e.comment})]},e.hash())}))}),Object(k.jsx)("tfoot",{children:Object(k.jsxs)("tr",{children:["''"," ",Object(k.jsxs)("td",{className:"",children:["\u03a3 ",a.sumTimeString]}),"''"," ",Object(k.jsxs)("td",{className:"",children:[a.sumHoursString," h"]}),"''"," ",Object(k.jsx)("td",{className:"",children:Object(k.jsx)(Y,{hours:a.sumHours,rate:50})}),Object(k.jsx)("td",{})]})})]})]})}))})}}]),n}(r.a.Component),T=(n(158),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).context=void 0,e.state={},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"mb-3",style:{position:"relative",height:"1.55em",border:"solid 1px silver"},children:[Object(k.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%"},children:Object(k.jsx)("div",{className:"d-flex justify-content-between",children:Array.from(new Array(24),(function(e,t){return t})).map((function(e){return Object(k.jsx)("div",{style:{borderRight:"solid 1px silver",color:"silver",flex:"1 1 0px",height:"1.5em",textAlign:"center"},children:e%2===0?e:null},e)}))})}),Object(k.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%"},children:this.props.workEntries.map((function(e){var t=e.getStartMoment(),n=e.getEndMoment().diff(t,"minutes")/24/60*100,a=t.clone().startOf("day"),r=t.diff(a,"minutes")/24/60*100;return Object(k.jsx)("div",{style:{background:"#009ACD",height:"1.5em",width:n+"%",position:"absolute",left:r+"%",top:0,opacity:.5}},e.start)}))})]})}}]),n}(r.a.Component)),P=n(56),L=n(314),F=n(166),W=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).context=void 0,e}return Object(o.a)(n,[{key:"startValue",get:function(){return this.props.timeEntry.start?this.props.timeEntry.start:m()().format("HH:mm")}},{key:"endValue",get:function(){return this.props.timeEntry.end?this.props.timeEntry.end:""}},{key:"duration",get:function(){var e=this.props.timeEntry.duration;return e.hours().toString().padStart(2,"0")+":"+e.minutes().toString().padStart(2,"0")}},{key:"earnings",get:function(){var e=this.props.timeEntry.duration.asHours();return Object(k.jsx)(Y,{hours:e,rate:50})}},{key:"render",value:function(){var e=this;return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(L.a,{children:[Object(k.jsx)(F.a,{onClick:function(){return e.props.makeEditable(!0)},children:this.startValue}),Object(k.jsx)(F.a,{className:"text-right",onClick:function(){return e.props.makeEditable(!0)},children:this.endValue}),Object(k.jsx)(F.a,{className:"text-right",children:this.duration}),Object(k.jsx)(F.a,{className:"text-right",children:this.earnings}),Object(k.jsx)(F.a,{onClick:function(){return e.props.makeEditable(!0)},children:this.props.timeEntry.comment})]})})}}]),n}(r.a.Component),V=n(316),K=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).timer=void 0,a.formRef=void 0,a.textInput=void 0,console.log("TimeEntryEdit.constructor"),a.formRef=r.a.createRef(),a.textInput=r.a.createRef(),a.keydownHandler=a.keydownHandler.bind(Object(y.a)(a)),a}return Object(o.a)(n,[{key:"endOutput",get:function(){return m()().format("HH:mm:ss")}},{key:"keydownHandler",value:function(e){"Enter"===e.key&&e.ctrlKey&&(e.preventDefault(),this.submit()),"Backspace"===e.key&&e.ctrlKey&&(e.preventDefault(),console.log(e.key),this.props.remove())}},{key:"componentDidMount",value:function(){var e,t;console.log("addEventListener"),document.addEventListener("keydown",this.keydownHandler),null===(e=this.textInput)||void 0===e||null===(t=e.current)||void 0===t||t.focus()}},{key:"componentWillUnmount",value:function(){console.log("removeEventListener"),document.removeEventListener("keydown",this.keydownHandler)}},{key:"submit",value:function(e){e&&e.preventDefault(),console.log("formRef",this.formRef.current),this.formRef.current&&this.props.onChange(this.formRef.current),this.props.makeEditable(!1)}},{key:"render",value:function(){return Object(k.jsx)(V.a,{ref:this.formRef,onSubmit:this.submit.bind(this),children:Object(k.jsxs)(L.a,{className:"timeEntryRow",children:[Object(k.jsx)(F.a,{children:Object(k.jsx)("input",{type:"time",name:"start",form:"form1",defaultValue:this.startValue,className:"form-control",ref:this.textInput})}),Object(k.jsx)(F.a,{children:Object(k.jsx)("div",{className:"d-flex",children:this.endValue?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("input",{type:"time",name:"end",form:"form1",defaultValue:this.endValue,className:"form-control"}),Object(k.jsx)("a",{href:"/play",className:"pl-3",onClick:this.play.bind(this),children:Object(k.jsx)(P.a,{})})]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("output",{children:this.endOutput}),Object(k.jsx)("a",{href:"/stop",className:"pl-3",onClick:this.stop.bind(this),children:Object(k.jsx)(P.c,{})})]})})}),Object(k.jsx)(F.a,{className:"text-right",children:Object(k.jsx)("output",{children:this.duration})}),Object(k.jsx)(F.a,{className:"text-right",children:Object(k.jsx)("output",{children:this.earnings})}),Object(k.jsx)(F.a,{children:Object(k.jsx)("textarea",{name:"comment",placeholder:"comment",className:"form-control",form:"form1",defaultValue:this.props.timeEntry.comment})})]})})}},{key:"play",value:function(e){e.preventDefault(),this.props.timeEntry.end=void 0,this.props.day.updateOne(this.props.timeEntry),this.startTimer()}},{key:"startTimer",value:function(){var e=this;this.timer=setInterval((function(){return e.forceUpdate()}),1e3)}},{key:"stop",value:function(e){e.preventDefault(),this.props.timeEntry.end=m()().format("HH:mm"),this.props.day.updateOne(this.props.timeEntry),this.stopTimer(),this.props.makeEditable(!1)}},{key:"stopTimer",value:function(){this.timer&&clearInterval(this.timer)}}]),n}(W),B=n(315),U=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).context=void 0,a.state={entries:[],editable:[]},a.keydownHandler=a.keydownHandler.bind(Object(y.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.fetch(),document.addEventListener("keydown",this.keydownHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keydownHandler)}},{key:"componentDidUpdate",value:function(e){e.date!==this.props.date&&this.fetch()}},{key:"fetch",value:function(){var e=this,t=this.props.day.state.entries;this.setState({entries:t},(function(){e.state.entries.length}))}},{key:"keydownHandler",value:function(e){"Insert"===e.key&&this.addRow(e),"Escape"===e.key&&this.setState({editable:[]})}},{key:"render",value:function(){var e=this;return Object(k.jsxs)(B.a,{fluid:!0,id:"timeTable",className:"py-3",children:[Object(k.jsxs)(L.a,{className:"border-top",style:{color:"#495057",backgroundColor:"#e9ecef",borderColor:"#dee2e6"},children:[Object(k.jsx)(F.a,{children:"Start Time"}),Object(k.jsx)(F.a,{className:"text-right",children:"End Time"}),Object(k.jsx)(F.a,{className:"text-right",children:"Duration"}),Object(k.jsx)(F.a,{className:"text-right",children:"Earnings"}),Object(k.jsx)(F.a,{children:"Comment"})]}),this.state.entries.map((function(t,n){return t.end&&!e.state.editable[n]?Object(k.jsx)(W,{date:e.props.date,timeEntry:t,day:e.props.day,onChange:function(t){return e.onChange(t,n)},makeEditable:function(t){return e.makeEditable(n,t)},remove:function(){}},n):Object(k.jsx)(K,{date:e.props.date,timeEntry:t,day:e.props.day,onChange:function(t){return e.onChange(t,n)},makeEditable:function(t){return e.makeEditable(n,t)},remove:e.remove.bind(e,n,t)},n)})),Object(k.jsxs)(L.a,{className:"tfoot-light",style:{color:"#495057",backgroundColor:"#e9ecef",borderColor:"#dee2e6"},children:[Object(k.jsx)(F.a,{children:Object(k.jsx)("a",{href:"/addRow",onClick:this.addRow.bind(this),children:Object(k.jsx)(P.b,{})})}),Object(k.jsxs)(F.a,{className:"text-right",children:["\u03a3 ",this.props.day.sumTimeString]}),Object(k.jsxs)(F.a,{className:"text-right",children:[this.props.day.sumHoursString," h"]}),Object(k.jsx)(F.a,{className:"text-right",children:Object(k.jsx)(Y,{hours:this.props.day.sumHours,rate:50})}),Object(k.jsx)(F.a,{})]})]})}},{key:"onChange",value:function(e,t){if(console.log("onChange",t,e),null!==e){var n=function(e){return Array.from(e).map((function(e){return e.name?Object(O.a)({},e.name,e.value):{}})).reduce((function(e,t){return Object.assign(e,t)}),{})}(e.querySelectorAll("input, textarea")),a=this.state.entries;a[t]=new v(n),this.setState({entries:a}),this.props.day.updateEntries(this.state.entries)}}},{key:"addRow",value:function(e){var t=this;e&&e.preventDefault();var n=this.state.entries;n.length>0&&n[n.length-1].finish();n.push(new v({start:m()().subtract(1,"hour").format("HH:mm"),end:m()().format("HH:mm")}));var a=n.length-1,r=this.state.editable;r[a]=!0,this.setState({entries:n,editable:r},(function(){t.props.day.updateEntries(n)}))}},{key:"addPlay",value:function(e){var t=this;e&&e.preventDefault();var n=this.state.entries;n.length>0&&n[n.length-1].finish();n.push(new v({start:m()().format("HH:mm")})),this.setState({entries:n},(function(){t.props.day.updateEntries(n)}))}},{key:"makeEditable",value:function(e,t){var n=this.state.editable;n[e]=t,this.setState({editable:n})}},{key:"remove",value:function(e,t){console.log("removing",e),this.props.day.remove(e)}}]),n}(r.a.Component),_=function(e){var t=e.children,n=e.waitBeforeShow,r=void 0===n?500:n,s=Object(a.useState)(!1),i=Object(p.a)(s,2),c=i[0],o=i[1];return Object(a.useEffect)((function(){setTimeout((function(){o(!0)}),r)}),[r]),c?t:null};function z(e){var t=e.monday,n=e.dayProvider;return(0,e.children)(function(){for(var e=[],a=0;a<7;a++){var r=n.getDay(t.clone().add(a,"days").toDate());e.push(r)}return e}())}var J=r.a.memo(z,(function(e,t){return e.monday.toISOString()===t.monday.toISOString()})),q=n(57),$=n(310),G=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).context=void 0,e}return Object(o.a)(n,[{key:"duration",get:function(){var e,t=m.a.duration(0),n=Object(q.a)(this.props.dateRange);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.add(a.sumTime)}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"sumHours",get:function(){return this.duration.asHours().toFixed(2)}},{key:"sumTime",get:function(){var e=this.duration.get("hours"),t=this.duration.get("minutes");return e.toString().padStart(2,"0")+":"+t.toString().padStart(2,"0")}},{key:"sumMoney",get:function(){var e=this.duration.asHours();return Object(k.jsx)(Y,{hours:e,rate:50})}},{key:"hashtags",get:function(){var e,t={},n=Object(q.a)(this.props.dateRange);try{for(n.s();!(e=n.n()).done;){var a,r=e.value,s=Object(q.a)(r.state.entries);try{for(s.s();!(a=s.n()).done;){var i,c=a.value,o=$(c.comment),d=Object(q.a)(o);try{for(d.s();!(i=d.n()).done;){var u=i.value;u in t||(t[u]=0),t[u]+=c.duration.asHours()}}catch(h){d.e(h)}finally{d.f()}}}catch(h){s.e(h)}finally{s.f()}}}catch(h){n.e(h)}finally{n.f()}var l=Object.entries(t).sort((function(e,t){return t[1]-e[1]}));return Object.fromEntries(l)}},{key:"title",get:function(){return Object(k.jsxs)("h5",{style:{paddingTop:0},children:["Week #",m()(this.props.date).isoWeek()," total"]})}},{key:"render",value:function(){var e=this.hashtags;return Object(k.jsxs)("div",{className:"card w-100",children:[Object(k.jsxs)("div",{className:"jumbotron p-3",children:[Object(k.jsxs)("h1",{className:"display-4 text-center",children:[this.sumHours,"h"]}),Object(k.jsx)("h3",{className:"lead left",children:this.sumTime}),Object(k.jsx)("h3",{className:"lead text-right",children:this.sumMoney})]}),Object(k.jsx)("div",{className:"card-body",children:this.title}),Object(k.jsx)("ul",{className:"list-group list-group-flush",children:Object.keys(e).map((function(t){return Object(k.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[t,Object(k.jsxs)("span",{className:"badge badge-primary badge-pill",children:[e[t].toFixed(2),"h"]})]},t)}))}),Object(k.jsx)("div",{className:"text-muted",children:Math.random()})]})}}]),n}(r.a.PureComponent),Q=G,X=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"title",get:function(){var e=m()(this.props.date);return Object(k.jsxs)("h5",{children:["Month ",e.format("YYYY-MM")," total"]})}}]),n}(G),Z=r.a.memo(X);function ee(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),r=n[0],s=n[1],i=Object(a.useCallback)((function(t){if("c"===t.key.toLowerCase()&&t.ctrlKey){console.log("Ctrl-C");var n=e.day.state.entries;s(n.slice()),console.log(n,r)}else if("v"===t.key.toLowerCase()&&t.ctrlKey){if(console.log("Ctrl-V"),!r)return void console.log("clipboard is empty");if(e.day.state.entries.length)return void console.warn("Overwriting is dangerous");console.log(r),e.day.updateEntries(r.slice())}else t.key&&t.key}),[e.day,r]);return Object(a.useEffect)((function(){return document.addEventListener("keydown",i,!1),function(){document.removeEventListener("keydown",i,!1)}}),[e.day,r,i]),Object(k.jsx)(k.Fragment,{})}function te(e){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(T,{workEntries:e.dayData.state.entries}),Object(k.jsx)(U,{date:e.date,day:e.dayData,appState:e.appState}),Object(k.jsx)("div",{className:"d-flex justify-content-between",style:{gap:12},children:Object(k.jsxs)(_,{children:[Object(k.jsx)(J,{monday:m()(e.date).startOf("week"),dayProvider:e.appState,children:function(t){return Object(k.jsx)(Q,{date:e.date,dateRange:t})}}),Object(k.jsx)(J,{monday:m()(e.date).startOf("month"),dayProvider:e.appState,children:function(t){return Object(k.jsx)(Z,{date:e.date,dateRange:t})}})]})}),Object(k.jsx)(ee,{day:e.dayData})]})}var ne=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).context=void 0,e}return Object(o.a)(n,[{key:"render",value:function(){for(var e=this,t=m()(this.props.date).startOf("isoWeek"),n={},a=0,r=Array.from(new Array(7),(function(e,n){return m()(t).add(n,"days")}));a<r.length;a++){var s=r[a],i=this.props.getDay(s.toDate()),c=i.sumHours?i.sumHours+1:0;n[s.format("YYYY-MM-DD")]=c}return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("h3",{children:["#",t.week().toString().padStart(2,"0")]}),Object(k.jsxs)(R.a,{as:"table",children:[Object.entries(n).map((function(t){var n=Object(p.a)(t,2),a=n[0];n[1];return Object(k.jsx)("col",{style:{background:m()(e.props.date).format("YYYY-MM-DD")===a?"#abc":[7,6].includes(m()(a).isoWeekday())?"#eee":"inherit"}},a)})),Object(k.jsxs)("thead",{children:[Object(k.jsx)("tr",{children:Object.entries(n).map((function(e){var t=Object(p.a)(e,2),n=t[0];t[1];return Object(k.jsx)("td",{children:m()(n).format("ddd")},n)}))}),Object(k.jsx)("tr",{children:Object.entries(n).map((function(e){var t=Object(p.a)(e,2),n=t[0];t[1];return Object(k.jsx)("td",{children:n},n)}))})]}),Object(k.jsx)("tbody",{children:Object(k.jsx)("tr",{children:Object.entries(n).map((function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1];if(!a)return Object(k.jsx)("td",{});var r=a>6?"13:00":x(9+a),s=a>6?x(14):null,i=a>6?x(14+a-4):null;return Object(k.jsxs)("td",{children:[Object(k.jsxs)("div",{children:[x(9)," -"," ",r]}),Object(k.jsxs)("div",{children:[s," - ",i]})]},n)}))})}),Object(k.jsx)("tfoot",{children:Object(k.jsx)("tr",{children:Object.entries(n).map((function(e){var t=Object(p.a)(e,2),n=(t[0],t[1]);return Object(k.jsxs)("td",{className:"",children:["\u03a3"," ",Object(k.jsx)("span",{title:n.toString(),children:x(n)})]})}))})})]})]})}}]),n}(r.a.Component);function ae(e){var t=e.date,n=e.setDate;return Object(k.jsxs)(l.c,{children:[Object(k.jsx)(l.a,{exact:!0,path:"/",children:Object(k.jsx)(te,{date:t,setDate:n,dayData:e.dayData,appState:e.dayProvider})}),Object(k.jsx)(l.a,{path:"/report",children:Object(k.jsx)(A,{date:t,getDay:e.dayProvider.getDay.bind(e.dayProvider)})}),Object(k.jsx)(l.a,{path:"/sap",children:Object(k.jsx)(ne,{date:t,getDay:e.dayProvider.getDay.bind(e.dayProvider)})})]})}function re(e){var t=Object(a.useCallback)((function(t){"ArrowLeft"===t.key&&t.ctrlKey?e.decDate():"ArrowRight"===t.key&&t.ctrlKey?e.incDate():t.key&&t.key}),[e]);return Object(a.useEffect)((function(){return document.addEventListener("keydown",t,!1),function(){document.removeEventListener("keydown",t,!1)}}),[e,t]),Object(k.jsx)(k.Fragment,{})}var se=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).context=void 0,a.myInput=void 0,a.myInput=r.a.createRef(),a.keydownHandler=a.keydownHandler.bind(Object(y.a)(a)),a.handleResize=a.handleResize.bind(Object(y.a)(a)),a}return Object(o.a)(n,[{key:"range",get:function(){return this.myInput.current?Math.round(this.myInput.current.offsetWidth/32/2)-1:10}},{key:"keydownHandler",value:function(e){var t=(e.ctrlKey||e.metaKey)&&e.shiftKey;t&&"ArrowLeft"===e.key&&this.dayClick(e,m()(this.props.date).subtract("1","day")),t&&"ArrowRight"===e.key&&this.dayClick(e,m()(this.props.date).add("1","day"))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keydownHandler),console.log("width",this.myInput.current.offsetWidth,"rerender"),this.myInput.current&&window.addEventListener("resize",this.handleResize),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keydownHandler),window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){this.forceUpdate()}},{key:"render",value:function(){for(var e=this,t=[],n=m()(this.props.date),a=-this.range;a<=this.range;a++)t.push(n.clone().add(a,"days"));return this.myInput.current?Object(k.jsx)("div",{className:"d-flex justify-content-center mb-3",ref:this.myInput,children:t.map((function(t){var n=[6,7].includes(t.isoWeekday())?"weekend":"",a=t.isSame(e.props.date,"day")?"today":"",r=Object(k.jsx)("div",{className:"dayBox border text-center align-baseline "+[n,a].join(" "),children:t.format("DD")},t.toISOString());return t.isSame(e.props.date,"day")?r:Object(k.jsx)("a",{href:"/day/"+t.format("YYYY-MM-DD"),onClick:function(n){return e.dayClick(n,t)},style:{textDecoration:"none"},children:r},t.toISOString())}))}):Object(k.jsx)("div",{className:"d-flex justify-content-center mb-3",ref:this.myInput})}},{key:"dayClick",value:function(e,t){e.preventDefault(),this.props.setDate(t.toDate())}}]),n}(r.a.Component);function ie(e){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(H,{date:m()(e.date),day:e.dayData,setDate:e.setDate}),Object(k.jsx)("main",{role:"main",className:"container-fluid",children:Object(k.jsxs)("div",{className:"h-100",children:[Object(k.jsx)(se,{date:e.date,setDate:e.setDate}),Object(k.jsx)(ae,{date:e.date,setDate:e.setDate,dayData:e.dayData,dayProvider:e.dayProvider})]})}),Object(k.jsx)(re,{incDate:e.dateState.incDate.bind(e.dateState),decDate:e.dateState.decDate.bind(e.dateState)}),Object(k.jsx)("footer",{className:"container-fluid mt-3 py-2 border-top",children:Object(k.jsxs)("div",{className:"inner",children:[Object(k.jsxs)("div",{children:["\xa9 2021"," ",Object(k.jsx)("a",{href:"https://github.com/spidgorny/",children:"Slawa"})]}),Object(k.jsxs)(L.a,{children:[Object(k.jsxs)(F.a,{children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("kbd",{children:"Ctrl-Left"})," - prev day"]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("kbd",{children:"Ctrl-Right"})," - next day"]})]}),Object(k.jsxs)(F.a,{children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("kbd",{children:"Ins"})," - new line"]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("kbd",{children:"Ctrl-Enter"})," - save edit"]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("kbd",{children:"Ctrl-Backspace"})," - remove line"]})]}),Object(k.jsxs)(F.a,{children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("kbd",{children:"Ctrl-C"})," ",Object(k.jsx)("kbd",{children:"Ctrl-V"})," - clipboard"]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("kbd",{children:"Ctrl-S"})," - Download backup (json)"]})]})]})]})})]})}function ce(e){var t=Object(a.useCallback)((function(t){if("s"===t.key&&t.ctrlKey){t.preventDefault();for(var n=2020,a=[],r=m()().year(n).startOf("year"),s=m()(r).add(1,"year");r.isBefore(s);)a.push(r.toDate()),r=r.add(1,"day");console.log("yearDates",a.length);for(var i={},c=0,o=a;c<o.length;c++){var d=o[c],u=e.dayProvider.getDay(d);u.state.entries.length&&(i[m()(d).format("YYYY-MM-DD")]=u.state.entries.slice())}!function(e,t){var n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2)),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",t+".json"),document.body.appendChild(a),a.click(),a.remove()}({signature:"excel-time-tracking",year:n,data:i},"excel-time-tracking-2020")}}),[e.dayProvider]);return Object(a.useEffect)((function(){return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[t]),Object(k.jsx)(k.Fragment,{})}var oe=Object(h.a)(),de=(new Date,function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).context=void 0,e.state={},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsx)(D,{children:function(e,t,n){return Object(k.jsx)(w,{date:e,children:function(a,r){return Object(k.jsxs)(l.b,{history:oe,children:[Object(k.jsx)(ie,{date:e,dayData:a,setDate:t,dayProvider:r,dateState:n}),Object(k.jsx)(ce,{dayProvider:r})]})}})}})}}]),n}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(de,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[312,1,2]]]);
//# sourceMappingURL=main.fe3910e3.chunk.js.map