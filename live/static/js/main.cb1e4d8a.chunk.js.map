{"version":3,"sources":["state/AppStateBase.ts","model/TimeEntry.ts","model/POJO.ts","state/DaysState.ts","state/AppState.ts","state/GlobalContext.ts","components/Earnings.tsx","components/TimeEntryRow.tsx","components/TimeEntryEdit.tsx","components/DayTable.tsx","components/Header.tsx","components/DayTimeline.tsx","components/WeekTotal.tsx","components/MonthTotal.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["AppStateBase","_storage","window","localStorage","_callbacks","name","defaultValue","val","this","getItem","JSON","parse","value","setItem","stringify","call","console","log","push","length","callMe","TimeEntry","props","start","end","comment","Object","assign","date","Date","split","hr","min","iHr","parseInt","iMin","moment","hours","minutes","now","getHours","getMinutes","format","getStartMoment","getEndMoment","duration","diff","key","hasOwnProperty","DaysState","entries","fetch","map","el","filter","notify","timeEntry","index","findIndex","updateEntries","error","reduce","acc","te","add","AppState","rate","dayStateCache","update","ymd","daysState","subscribe","bind","GlobalContext","React","createContext","currencies","require","Earnings","context","byCountry","countryCode","navigator","language","substr","currency","get","amount","result","Intl","NumberFormat","undefined","style","Component","contextType","TimeEntryRow","onClick","e","makeEditable","startValue","endValue","className","earnings","colSpan","dur","toString","padStart","asHours","TimeEntryEdit","timer","textInput","createRef","ctrlKey","setInterval","forceUpdate","document","addEventListener","keydownHandler","current","focus","clearInterval","removeEventListener","type","form","onChange","ref","href","play","endOutput","stop","placeholder","preventDefault","getDay","updateOne","DayTable","state","editable","setState","prevProps","addRow","Table","yesNo","startWorking","color","backgroundColor","borderColor","isSame","addPlay","sumTime","sumMoney","input","target","eElements","closest","querySelectorAll","values","Array","from","pair","finish","subtract","toFixed","Header","focused","isAfter","endOf","toDate","onDateChange","setDate","onFocusChange","x","id","isOutsideRange","isDayHighlighted","initialVisibleMonth","data-toggle","data-target","aria-controls","aria-expanded","aria-label","to","logout","DayTimeline","ctrl","metaKey","shiftKey","dayClick","days","today","i","clone","day","isWeekend","includes","isoWeekday","isToday","dayBox","join","toISOString","textDecoration","findHashtags","WeekTotalComponent","hashtags","title","keys","tag","dateRange","monday","startOf","dayState","sum","tagTimes","tags","sorted","sort","a","b","fromEntries","isoWeek","WeekTotal","debounceRender","MonthTotalComponent","daysInMonth","month","MonthTotal","history","createBrowserHistory","App","role","path","exact","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.cb1e4d8a.chunk.js","sourcesContent":["export class AppStateBase {\n\n\t_storage = window.localStorage;\n\n\t_callbacks: Function[] = [];\n\n\tfetch(name: string, defaultValue: any = null) {\n\t\tconst val = this._storage.getItem(name);\n\t\tif (!val) {\n\t\t\treturn defaultValue;\n\t\t}\n\t\treturn JSON.parse(val);\n\t}\n\n\tupdate(name: string, value: any) {\n\t\tthis._storage.setItem(name, JSON.stringify(value));\n\t}\n\n\tsubscribe(call: Function) {\n\t\tconsole.log('subscribe');\n\t\tthis._callbacks.push(call);\n\t}\n\n\tnotify() {\n\t\tconsole.log('notify', this._callbacks.length);\n\t\tfor (const callMe of this._callbacks) {\n\t\t\tcallMe();\n\t\t}\n\t}\n\n}\n","import {POJO} from \"./POJO\";\nimport moment from \"moment\";\n\nexport class TimeEntry extends POJO {\n\n\t// @ts-ignore\n\tstart: string;\n\tend: string | undefined;\n\tcomment: string | undefined;\n\n\tconstructor(props: any = {}) {\n\t\tsuper(props);\n\t\tObject.assign(this, props);\n\t}\n\n\tget duration() {\n\t\tconst start = this.getStartMoment();\n\t\tconst end = this.getEndMoment();\n\t\tconst dur = moment.duration(end.diff(start));\n\t\treturn dur;\n\t}\n\n\tgetStartMoment() {\n\t\tconst date = new Date();\n\t\tconst [hr, min] = this.start.split(':');\n\t\tconst iHr = parseInt(hr, 10);\n\t\tconst iMin = parseInt(min, 10);\n\t\tconst from = moment(date).hours(iHr).minutes(iMin);\n\t\treturn from;\n\t}\n\n\t// returns now() if no end time specified\n\tgetEndMoment() {\n\t\tconst date = new Date();\n\t\tif (!this.end) {\n\t\t\tconst now = new Date();\n\t\t\treturn moment(date).hours(now.getHours()).minutes(now.getMinutes());\n\t\t}\n\t\tconst [hr, min] = this.end.split(':');\n\t\tconst iHr = parseInt(hr, 10);\n\t\tconst iMin = parseInt(min, 10);\n\t\tconst till = moment(date).hours(iHr).minutes(iMin);\n\t\treturn till;\n\t}\n\n\tfinish() {\n\t\tif (!this.end) {\n\t\t\tthis.end = moment().format('HH:mm');\n\t\t}\n\t}\n\n}\n","export class POJO {\n\n\t[key: string]: any;\n\n\tconstructor(props: any) {\n\t\tObject.assign(this, props);\n\t}\n\n\tassignProps(props: any) {\n\t\tfor (const key in props) {\n\t\t\tif (props.hasOwnProperty(key)) {\n\t\t\t\tconsole.log('this[', key, '] = ', props[key]);\n\t\t\t\tthis[key] = props[key];\n\t\t\t}\n\t\t}\n\t}\n\n\ttoJson() {\n\t\treturn JSON.stringify(this);\n\t}\n\n}\n","import {AppStateBase} from \"./AppStateBase\";\nimport moment from \"moment\";\nimport {TimeEntry} from \"../model/TimeEntry\";\n\nexport class DaysState extends AppStateBase {\n\n\tdate: Date;\n\tentries: TimeEntry[];\n\n\tconstructor(date: Date) {\n\t\tsuper();\n\t\tthis.date = date;\n\t\tthis.entries = this.fetch(this.key, [])\n\t\t\t.map((el: any) => new TimeEntry(el))\n\t\t\t.filter((el: TimeEntry) => el.start);\n\t}\n\n\tget key() {\n\t\tconst ymd = moment(this.date).format('YYYY-MM-DD');\n\t\treturn 'date.' + ymd + '.entries';\n\t}\n\n\tupdateEntries(entries: TimeEntry[]) {\n\t\tsuper.update(this.key, entries);\n\t\tthis.notify();\n\t}\n\n\tupdateOne(timeEntry: TimeEntry) {\n\t\tconst index = this.entries.findIndex((el => el === timeEntry));\n\t\tif (index === -1) {\n\t\t\tconsole.error('index in updateOne not found');\n\t\t\treturn;\n\t\t}\n\t\tthis.entries[index] = timeEntry;\n\t\tthis.updateEntries(this.entries);\n\t\tconsole.log('updateOne', timeEntry);\n\t\tthis.notify();\n\t}\n\n\tget sumTime(): moment.Duration {\n\t\tconst sum = this.entries.reduce((acc: moment.Duration, te: TimeEntry) => te.duration.add(acc), moment.duration(0));\n\t\treturn sum;\n\t}\n\n}\n","import {AppStateBase} from \"./AppStateBase\";\nimport {DaysState} from \"./DaysState\";\nimport moment from \"moment\";\n\nexport class AppState extends AppStateBase {\n\n\tdate: Date = new Date();\n\trate: number;\n\tdayStateCache: {\n\t\t[key: string]: DaysState;\n\t} = {};\n\n\tconstructor() {\n\t\tsuper();\n\t\t(window as any)['state'] = this;\n\t\tthis.date = this.fetch('date', this.date);\n\t\tthis.rate = this.fetch('rate', 50);\n\t}\n\n\tsetDate(date: Date) {\n\t\tthis.date = date;\n\t\tthis.update('date', this.date);\n\t\tthis.notify();\n\t}\n\n\tgetDay(date: Date) {\n\t\tconst ymd = moment(date).format('YYYY-MM-DD');\n\t\tif (ymd in this.dayStateCache) {\n\t\t\treturn this.dayStateCache[ymd];\n\t\t}\n\t\tlet daysState = new DaysState(date);\n\t\tdaysState.subscribe(this.notify.bind(this));\n\t\tthis.dayStateCache[ymd] = daysState;\n\t\treturn daysState;\n\t}\n\n}\n\n","import React from \"react\";\nimport {AppState} from \"./AppState\";\n\nexport var GlobalContext = React.createContext(new AppState());\n","import React from \"react\";\nimport {AppState} from \"../state/AppState\";\nimport {GlobalContext} from \"../state/GlobalContext\";\n\nconst currencies = require('country-currency');\n\nexport class Earnings extends React.Component<{\n\thours: number;\n}, {}> {\n\n\tstatic contextType = GlobalContext;\n\t// @ts-ignore\n\tcontext: AppState;\n\n\trender() {\n\t\tconst byCountry = currencies.byCountry();\n\t\tlet countryCode = navigator.language.substr(3);\n\t\tconst currency = byCountry.get(countryCode);\n\t\t// console.log(countryCode, currency);\n\t\tconst rate = this.context.rate;\n\n\t\tconst amount = this.props.hours * rate;\n\t\tconst result = new Intl.NumberFormat(undefined, {\n\t\t\tstyle: 'currency',\n\t\t\tcurrency,\n\t\t}).format(amount);\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{result}\n\t\t\t</>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport {TimeEntry} from \"../model/TimeEntry\";\nimport moment from \"moment\";\nimport {GlobalContext} from \"../state/GlobalContext\";\nimport {AppState} from \"../state/AppState\";\nimport {Earnings} from \"./Earnings\";\n\ninterface ITimeEntryRowProps {\n\tdate: Date;\n\ttimeEntry: TimeEntry;\n\tonChange: (e: React.ChangeEvent) => void;\n\tmakeEditable: (e: Event, yesOrNo: boolean) => void;\n}\n\nexport class TimeEntryRow extends React.Component<ITimeEntryRowProps> {\n\n\tstatic contextType = GlobalContext;\n\t// @ts-ignore\n\tcontext: AppState;\n\n\tget startValue() {\n\t\tif (this.props.timeEntry.start) {\n\t\t\treturn this.props.timeEntry.start;\n\t\t}\n\t\treturn moment().format('HH:mm');\n\t}\n\n\tget endValue() {\n\t\tif (this.props.timeEntry.end) {\n\t\t\treturn this.props.timeEntry.end;\n\t\t}\n\t\treturn '';\n\t}\n\n\tget duration() {\n\t\tconst dur = this.props.timeEntry.duration;\n\t\treturn dur.hours().toString().padStart(2, '0') + ':' + dur.minutes().toString().padStart(2, '0');\n\t}\n\n\tget earnings() {\n\t\tconst hours = this.props.timeEntry.duration.asHours();\n\t\treturn (<Earnings hours={hours}/>);\n\t}\n\n\trender() {\n\t\treturn (<tbody>\n\t\t<tr>\n\t\t\t<td onClick={e => this.props.makeEditable(e as unknown as Event, true)}>\n\t\t\t\t{this.startValue}\n\t\t\t</td>\n\t\t\t<td onClick={e => this.props.makeEditable(e as unknown as Event, true)}>\n\t\t\t\t{this.endValue}\n\t\t\t</td>\n\t\t\t<td className=\"text-right\">\n\t\t\t\t{this.duration}\n\t\t\t</td>\n\t\t\t<td className=\"text-right\">\n\t\t\t\t{this.earnings}\n\t\t\t</td>\n\t\t</tr>\n\t\t{this.props.timeEntry.comment ?\n\t\t\t<tr>\n\t\t\t\t<td colSpan={6}>\n\t\t\t\t\t{this.props.timeEntry.comment}\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t: null}\n\t\t</tbody>);\n\t}\n}\n","import React from \"react\";\nimport {TimeEntry} from \"../model/TimeEntry\";\nimport moment from \"moment\";\nimport {TimeEntryRow} from \"./TimeEntryRow\";\nimport {FaPlay, FaStop} from \"react-icons/fa\";\n\ninterface ITimeEntryRowProps {\n\tdate: Date;\n\ttimeEntry: TimeEntry;\n\tonChange: (e: React.ChangeEvent) => void;\n\tmakeEditable: (e: Event, yesOrNo: boolean) => void;\n}\n\nexport class TimeEntryEdit extends TimeEntryRow {\n\n\ttimer: any;\n\ttextInput: React.RefObject<HTMLInputElement>;\n\n\tconstructor(props: any) {\n\t\tsuper(props);\n\t\tthis.textInput = React.createRef();\n\t}\n\n\tget endOutput() {\n\t\treturn moment().format('HH:mm:ss');\n\t}\n\n\tkeydownHandler(e: KeyboardEvent) {\n\t\t// console.log(e.key, e.ctrlKey, e.metaKey);\n\t\tif (e.key === 'Enter' && e.ctrlKey) {\n\t\t\tthis.props.makeEditable(e, false);\n\t\t}\n\t}\n\n\tcomponentDidMount(): void {\n\t\tthis.timer = setInterval(() => this.forceUpdate(), 1000);\n\t\tdocument.addEventListener('keydown', (e) => this.keydownHandler(e));\n\t\tthis.textInput?.current?.focus();\n\t}\n\n\tcomponentWillUnmount(): void {\n\t\tclearInterval(this.timer);\n\t\tdocument.removeEventListener('keydown', (e) => this.keydownHandler(e));\n\t}\n\n\trender() {\n\t\treturn <tbody className=\"timeEntryRow\">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<input type=\"time\" name=\"start\" form=\"form1\"\n\t\t\t\t\t   value={this.startValue}\n\t\t\t\t\t   onChange={this.props.onChange}\n\t\t\t\t\t   className=\"form-control\"\n\t\t\t\t\t   ref={this.textInput}\n\t\t\t\t/>\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<div className=\"d-flex\">\n\t\t\t\t\t{this.endValue ?\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<input type=\"time\" name=\"end\" form=\"form1\"\n\t\t\t\t\t\t\t\t   value={this.endValue}\n\t\t\t\t\t\t\t\t   onChange={this.props.onChange}\n\t\t\t\t\t\t\t\t   className=\"form-control\"/>\n\t\t\t\t\t\t\t<a href=\"/play\" className=\"pl-3\" onClick={this.play.bind(this)}>\n\t\t\t\t\t\t\t\t<FaPlay/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<output>\n\t\t\t\t\t\t\t\t{this.endOutput}\n\t\t\t\t\t\t\t</output>\n\t\t\t\t\t\t\t<a href=\"/stop\" className=\"pl-3\" onClick={this.stop.bind(this)}>\n\t\t\t\t\t\t\t\t<FaStop/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t\t<td className=\"text-right\">\n\t\t\t\t<output>\n\t\t\t\t\t{this.duration}\n\t\t\t\t</output>\n\t\t\t</td>\n\t\t\t<td className=\"text-right\">\n\t\t\t\t<output>\n\t\t\t\t\t{this.earnings}\n\t\t\t\t</output>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colSpan={6}>\n\t\t\t\t\t\t<textarea name=\"comment\"\n\t\t\t\t\t\t\t\t  placeholder=\"comment\"\n\t\t\t\t\t\t\t\t  className=\"form-control\" form=\"form1\"\n\t\t\t\t\t\t\t\t  onChange={this.props.onChange}\n\t\t\t\t\t\t\t\t  value={this.props.timeEntry.comment}/>\n\t\t\t</td>\n\t\t</tr>\n\t\t</tbody>;\n\t}\n\n\tplay(e: React.MouseEvent) {\n\t\te.preventDefault();\n\t\tthis.props.timeEntry.end = undefined;\n\t\tconst dayStorage = this.context.getDay(this.props.date);\n\t\tdayStorage.updateOne(this.props.timeEntry);\n\t}\n\n\tstop(e: React.MouseEvent) {\n\t\te.preventDefault();\n\t\tthis.props.timeEntry.end = moment().format('HH:mm');\n\t\tconst dayStorage = this.context.getDay(this.props.date);\n\t\tdayStorage.updateOne(this.props.timeEntry);\n\t}\n\n}\n","import React from \"react\";\nimport Table from \"react-bootstrap/Table\";\nimport {FaPlay, FaPlus} from \"react-icons/fa\";\nimport {AppState} from \"../state/AppState\";\nimport {GlobalContext} from \"../state/GlobalContext\";\nimport {TimeEntry} from \"../model/TimeEntry\";\nimport {TimeEntryRow} from \"./TimeEntryRow\";\nimport moment from \"moment\";\nimport {TimeEntryEdit} from \"./TimeEntryEdit\";\nimport {Earnings} from \"./Earnings\";\n\ninterface IDayTableState {\n\tentries: TimeEntry[];\n\teditable: boolean[];\n}\n\nexport class DayTable extends React.Component<{\n\tdate: Date;\n}, IDayTableState> {\n\n\tstatic contextType = GlobalContext;\n\t// @ts-ignore\n\tcontext: AppState;\n\n\tstate = {\n\t\tentries: [],\n\t\teditable: [],\n\t};\n\n\tget sumTime() {\n\t\tconst dayState = this.context.getDay(this.props.date);\n\t\treturn dayState.sumTime.asHours().toFixed(2);\n\t}\n\n\tget sumMoney() {\n\t\tconst dayState = this.context.getDay(this.props.date);\n\t\tconst hours = dayState.sumTime.asHours();\n\t\treturn (<Earnings hours={hours}/>);\n\t}\n\n\tcomponentDidMount(): void {\n\t\tthis.fetch();\n\t\tdocument.addEventListener('keydown', (e) => this.keydownHandler(e));\n\t}\n\n\tfetch() {\n\t\tconst entries = this.context.getDay(this.props.date).entries;\n\t\t// console.log('componentDidMount', entries);\n\t\tthis.setState({\n\t\t\tentries,\n\t\t}, () => {\n\t\t\tif (this.state.entries.length === 0) {\n\t\t\t\t// this.addRow(null);\n\t\t\t}\n\t\t});\n\t}\n\n\tcomponentDidUpdate(prevProps: any) {\n\t\tif (prevProps.date !== this.props.date) {\n\t\t\tthis.fetch();\n\t\t}\n\t}\n\n\tkeydownHandler(e: KeyboardEvent) {\n\t\t// console.log(e.key, e.ctrlKey, e.metaKey);\n\t\tif (e.key === 'Insert') {\n\t\t\t// @ts-ignore\n\t\t\tthis.addRow(e as unknown as Event);\n\t\t}\n\t}\n\n\tcomponentWillUnmount(): void {\n\t\tdocument.removeEventListener('keydown', (e) => this.keydownHandler(e));\n\t}\n\n\trender() {\n\t\t// console.log('DayTable.render', this.props.date);\n\t\treturn (\n\t\t\t<Table>\n\t\t\t\t<thead className=\"thead-light\">\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Start Time</th>\n\t\t\t\t\t<th>End Time</th>\n\t\t\t\t\t<th className=\"text-right\">Duration</th>\n\t\t\t\t\t<th className=\"text-right\">Earnings</th>\n\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t{this.state.entries.map((te: TimeEntry, index: number) =>\n\t\t\t\t\t(te.end && !this.state.editable[index]) ?\n\t\t\t\t\t\t<TimeEntryRow date={this.props.date}\n\t\t\t\t\t\t\t\t\t  timeEntry={te} key={index}\n\t\t\t\t\t\t\t\t\t  onChange={e => this.onChange(e, index)}\n\t\t\t\t\t\t\t\t\t  makeEditable={(e, yesNo) => this.makeEditable(e, index, yesNo)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<TimeEntryEdit date={this.props.date}\n\t\t\t\t\t\t\t\t\t   timeEntry={te} key={index}\n\t\t\t\t\t\t\t\t\t   onChange={e => this.onChange(e, index)}\n\t\t\t\t\t\t\t\t\t   makeEditable={(e, yesNo) => this.makeEditable(e, index, yesNo)}\n\t\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{!this.state.entries.length ?\n\t\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td colSpan={4}>\n\t\t\t\t\t\t\t<a href=\"/start\" className=\"btn btn-primary\"\n\t\t\t\t\t\t\t   onClick={this.startWorking.bind(this)}>\n\t\t\t\t\t\t\t\t<FaPlay/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t\t: null}\n\t\t\t\t<tfoot className=\"tfoot-light\" style={{\n\t\t\t\t\tcolor: '#495057',\n\t\t\t\t\tbackgroundColor: '#e9ecef',\n\t\t\t\t\tborderColor: '#dee2e6',\n\t\t\t\t}}>\n\t\t\t\t<tr>\n\t\t\t\t\t<td colSpan={1}>\n\t\t\t\t\t\t<a href=\"/addRow\" onClick={this.addRow.bind(this)}>\n\t\t\t\t\t\t\t<FaPlus/>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td colSpan={1}>\n\t\t\t\t\t\t{moment(this.props.date).isSame(moment(), 'day')\n\t\t\t\t\t\t\t? <a href=\"/addPlay\" onClick={this.addPlay.bind(this)}>\n\t\t\t\t\t\t\t\t<FaPlay/>\n\t\t\t\t\t\t\t</a> : null}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td className=\"text-right\">\n\t\t\t\t\t\t{this.sumTime} h\n\t\t\t\t\t</td>\n\t\t\t\t\t<td className=\"text-right\">\n\t\t\t\t\t\t{this.sumMoney}\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t</tfoot>\n\t\t\t</Table>\n\t\t);\n\t}\n\n\tstartWorking(e: React.MouseEvent) {\n\t\tthis.addRow(e);\n\t}\n\n\tonChange(e: React.ChangeEvent, index: number) {\n\t\te.preventDefault();\n\t\t// console.log(e.target);\n\t\tconst input = e.target as HTMLInputElement;\n\t\tif (input === null) {\n\t\t\treturn;\n\t\t}\n\t\t// @ts-ignore\n\t\tconst eElements = input.closest('.timeEntryRow').querySelectorAll('input, textarea');\n\t\tconst aElements = Array.from(eElements) as HTMLInputElement[];\n\t\tconst valueSet = aElements.map((el: HTMLInputElement | HTMLTextAreaElement) => {\n\t\t\t// console.log(el);\n\t\t\tif (el.name) {\n\t\t\t\treturn {[el.name]: el.value};\n\t\t\t}\n\t\t\treturn {};\n\t\t});\n\t\tconst values = valueSet.reduce((acc, pair) => {\n\t\t\treturn Object.assign(acc, pair);\n\t\t}, {});\n\t\t// console.log(index, values);\n\t\tconst entries: TimeEntry[] = this.state.entries;\n\t\tentries[index] = new TimeEntry(values);\n\t\tthis.setState({\n\t\t\tentries,\n\t\t});\n\t\tthis.context.getDay(this.props.date)\n\t\t\t.updateEntries(this.state.entries);\n\t}\n\n\taddRow(e: React.MouseEvent | null) {\n\t\tif (e) {\n\t\t\te.preventDefault();\n\t\t}\n\t\tconst entries: TimeEntry[] = this.state.entries;\n\n\t\tif (entries.length > 0) {\n\t\t\tconst lastEntry = entries[entries.length - 1];\n\t\t\tlastEntry.finish();\n\t\t}\n\t\tentries.push(new TimeEntry({\n\t\t\tstart: moment().subtract(1, 'hour').format('HH:mm'),\n\t\t\tend: moment().format('HH:mm'),\n\t\t}));\t// add current entry to the list\n\n\t\tconst index = entries.length - 1;\n\t\tconst editable = this.state.editable;\n\t\t// @ts-ignore\n\t\teditable[index] = true;\n\n\t\tthis.setState({\n\t\t\tentries,\n\t\t\teditable,\n\t\t}, () => {\n\t\t\tthis.context.getDay(this.props.date).updateEntries(entries);\n\t\t});\n\t}\n\n\taddPlay(e: React.MouseEvent | null) {\n\t\tif (e) {\n\t\t\te.preventDefault();\n\t\t}\n\t\tconst entries: TimeEntry[] = this.state.entries;\n\n\t\tif (entries.length > 0) {\n\t\t\tconst lastEntry = entries[entries.length - 1];\n\t\t\tlastEntry.finish();\n\t\t}\n\t\tentries.push(new TimeEntry({\n\t\t\tstart: moment().format('HH:mm'),\n\t\t}));\t// add current entry to the list\n\t\tthis.setState({\n\t\t\tentries,\n\t\t}, () => {\n\t\t\tthis.context.getDay(this.props.date).updateEntries(entries);\n\t\t});\n\t}\n\n\tmakeEditable(e: Event, index: number, yesNo: boolean) {\n\t\tconst editable = this.state.editable;\n\t\t// @ts-ignore\n\t\teditable[index] = yesNo;\n\t\tthis.setState({\n\t\t\teditable,\n\t\t})\n\t}\n\n}\n","import React from \"react\";\nimport {Link} from \"react-router-dom\";\n// @ts-ignore\nimport {SingleDatePicker} from 'react-dates';\nimport 'react-dates/lib/css/_datepicker.css';\nimport 'react-dates/initialize';\nimport moment from \"moment\";\nimport {GlobalContext} from \"../state/GlobalContext\";\nimport {AppState} from \"../state/AppState\";\n\ninterface IHeaderProps {\n\tdate: moment.Moment;\n}\n\nexport class Header extends React.Component<IHeaderProps, {\n\tfocused: boolean;\n}> {\n\n\tstatic contextType = GlobalContext;\n\t// @ts-ignore\n\tcontext: AppState;\n\n\tstate = {\n\t\tfocused: false,\n\t};\n\n\tisOutsideRange(date: moment.Moment) {\n\t\tif (date.isAfter(moment().endOf('day'))) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tisDayHighlighted(date: moment.Moment) {\n\t\tconst dayState = this.context.getDay(date.toDate());\n\t\treturn dayState.entries.length > 0;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<header className=\"mb-3\">\n\t\t\t\t<nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\n\t\t\t\t\t<h3 className=\"navbar-brand\">\n\t\t\t\t\t\t<a href=\".\">excel-time-tracking</a>\n\t\t\t\t\t</h3>\n\t\t\t\t\t<SingleDatePicker\n\t\t\t\t\t\tdate={this.props.date} // momentPropTypes.momentObj or null\n\t\t\t\t\t\tonDateChange={(date: moment.Moment) => this.setDate(date)} // PropTypes.func.isRequired\n\t\t\t\t\t\tfocused={this.state.focused} // PropTypes.bool\n\t\t\t\t\t\tonFocusChange={(x: any) => this.setState({focused: x.focused})} // PropTypes.func.isRequired\n\t\t\t\t\t\tid=\"your_unique_id\" // PropTypes.string.isRequired,\n\t\t\t\t\t\tisOutsideRange={this.isOutsideRange.bind(this)}\n\t\t\t\t\t\tisDayHighlighted={this.isDayHighlighted.bind(this)}\n\t\t\t\t\t\tinitialVisibleMonth={() => moment().endOf('month')}\n\t\t\t\t\t/>\n\t\t\t\t\t<button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\n\t\t\t\t\t\t\t\t\tdata-target=\"#navbarNav\"\n\t\t\t\t\t\t\t\t\taria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n\t\t\t\t\t\t<span className=\"navbar-toggler-icon\"/>\n\t\t\t\t\t</button>\n\t\t\t\t\t<div className=\"collapse navbar-collapse justify-content-between\" id=\"navbarNav\">\n\t\t\t\t\t\t<div/>\n\t\t\t\t\t\t<div className=\"navbar-nav\">\n\t\t\t\t\t\t\t<Link className=\"nav-link active\" to=\".\">Home</Link>\n\t\t\t\t\t\t\t<a className=\"nav-link\" href=\"/logout\" onClick={this.logout.bind(this)}>Logout</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</nav>\n\t\t\t</header>\n\t\t);\n\t}\n\n\n\tlogout(e: React.MouseEvent) {\n\n\t}\n\n\tsetDate(date: moment.Moment) {\n\t\tconsole.log(date);\n\t\tthis.context.setDate(date.toDate());\n\t}\n\n}\n","import React from \"react\";\nimport moment from \"moment\";\nimport './DayTimeline.scss';\nimport {GlobalContext} from \"../state/GlobalContext\";\nimport {AppState} from \"../state/AppState\";\n\nexport class DayTimeline extends React.Component<{\n\tdate: Date;\n}, {}> {\n\n\tstatic contextType = GlobalContext;\n\t// @ts-ignore\n\tcontext: AppState;\n\n\tcomponentDidMount(): void {\n\t\tdocument.addEventListener('keydown', (e) => this.keydownHandler(e));\n\t}\n\n\tkeydownHandler(e: KeyboardEvent) {\n\t\t//console.log(e.key, e.ctrlKey, e.metaKey);\n\t\tconst ctrl = (e.ctrlKey || e.metaKey) && e.shiftKey;\n\t\tif (ctrl && e.key === 'ArrowLeft') {\n\t\t\t// @ts-ignore\n\t\t\tthis.dayClick(e as unknown as Event, moment(this.props.date).subtract('1', 'day'));\n\t\t}\n\t\tif (ctrl && e.key === 'ArrowRight') {\n\t\t\t// @ts-ignore\n\t\t\tthis.dayClick(e as unknown as Event, moment(this.props.date).add('1', 'day'));\n\t\t}\n\t}\n\n\tcomponentWillUnmount(): void {\n\t\tdocument.removeEventListener('keydown', (e) => this.keydownHandler(e));\n\t}\n\n\trender() {\n\t\tconst days = [];\n\t\tconst today = moment(this.props.date);\n\t\tfor (let i = -10; i <= 10; i++) {\n\t\t\tdays.push(today.clone().add(i, 'days'));\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"d-flex justify-content-center mb-3\">\n\t\t\t\t{days.map(day => {\n\t\t\t\t\tconst isWeekend = [6, 7].includes(day.isoWeekday()) ? 'weekend' : '';\n\t\t\t\t\tconst isToday = day.isSame(this.props.date, 'day') ? 'today' : '';\n\t\t\t\t\tlet dayBox = <div\n\t\t\t\t\t\tclassName={\"dayBox border text-center align-baseline \" + [isWeekend, isToday].join(' ')}\n\t\t\t\t\t\tkey={day.toISOString()}\n\t\t\t\t\t>\n\t\t\t\t\t\t{day.format('DD')}\n\t\t\t\t\t</div>;\n\t\t\t\t\tif (day.isSame(this.props.date, 'day')) {\n\t\t\t\t\t\treturn dayBox;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<a href={'/day/' + day.format('YYYY-MM-DD')} onClick={(e) => this.dayClick(e, day)}\n\t\t\t\t\t\t   style={{textDecoration: 'none'}}\n\t\t\t\t\t\t   key={day.toISOString()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{dayBox}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tdayClick(e: React.MouseEvent, date: moment.Moment) {\n\t\te.preventDefault();\n\t\tthis.context.setDate(date.toDate());\n\t}\n\n}\n","import React from \"react\";\nimport {AppState} from \"../state/AppState\";\nimport {GlobalContext} from \"../state/GlobalContext\";\nimport moment from \"moment\";\nimport {Earnings} from \"./Earnings\";\n// @ts-ignore\nimport debounceRender from 'react-debounce-render';\n\nconst findHashtags = require('find-hashtags');\n\nexport class WeekTotalComponent extends React.Component<{\n\tdate: Date;\n}, {}> {\n\n\tstatic contextType = GlobalContext;\n\t// @ts-ignore\n\tcontext: AppState;\n\n\tget dateRange() {\n\t\tconst dateRange = [];\n\t\tconst monday = moment(this.props.date).startOf('week');\n\t\tfor (let i = 0; i < 7; i++) {\n\t\t\tconst dayState = this.context.getDay(monday.clone().add(i, 'days').toDate());\n\t\t\tdateRange.push(dayState);\n\t\t}\n\t\treturn dateRange;\n\t}\n\n\tget duration() {\n\t\tlet sum = moment.duration(0);\n\t\tfor (const dayState of this.dateRange) {\n\t\t\tsum.add(dayState.sumTime);\n\t\t}\n\t\treturn sum;\n\t}\n\n\tget sumTime() {\n\t\treturn this.duration.asHours().toFixed(2);\n\t}\n\n\tget sumMoney() {\n\t\tconst hours = this.duration.asHours();\n\t\treturn (<Earnings hours={hours}/>);\n\t}\n\n\tget hashtags() {\n\t\tconst tagTimes: { [key: string]: number } = {};\n\t\tfor (const dayState of this.dateRange) {\n\t\t\tfor (const te of dayState.entries) {\n\t\t\t\tconst tags = findHashtags(te.comment);\n\t\t\t\tfor (const tag of tags) {\n\t\t\t\t\tif (!(tag in tagTimes)) {\n\t\t\t\t\t\ttagTimes[tag] = 0;\n\t\t\t\t\t}\n\t\t\t\t\ttagTimes[tag] += te.duration.asHours();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst sorted = Object.entries(tagTimes).sort((a: [string, number], b: [string, number]) => {\n\t\t\treturn b[1] as number - a[1];\t// value\n\t\t});\n\t\treturn Object.fromEntries(sorted);\n\t}\n\n\tget title() {\n\t\treturn <h5>Week #{moment(this.props.date).isoWeek()} total</h5>;\n\t}\n\n\trender() {\n\t\tconst hashtags = this.hashtags;\n\t\treturn (\n\t\t\t<div className=\"card w-100 ml-2 mr-2\">\n\t\t\t\t<div className=\"jumbotron p-3\">\n\t\t\t\t\t<h1 className=\"display-4 text-center\">{this.sumTime}h</h1>\n\t\t\t\t\t<h3 className=\"lead text-right\">{this.sumMoney}</h3>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"card-body\">\n\t\t\t\t\t{this.title}\n\t\t\t\t</div>\n\t\t\t\t<ul className=\"list-group list-group-flush\">\n\t\t\t\t\t{Object.keys(hashtags).map(tag => (\n\t\t\t\t\t\t<li className=\"list-group-item d-flex justify-content-between\" key={tag}>\n\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t<span className=\"badge badge-primary badge-pill\">\n\t\t\t\t\t\t\t\t\t{hashtags[tag].toFixed(2)}h\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport const WeekTotal = debounceRender(WeekTotalComponent);\n","import React from \"react\";\nimport moment from \"moment\";\nimport {WeekTotalComponent} from \"./WeekTotal\";\n// @ts-ignore\nimport debounceRender from 'react-debounce-render';\n\nexport class MonthTotalComponent extends WeekTotalComponent {\n\n\tget dateRange() {\n\t\tconst dateRange = [];\n\t\tconst monday = moment(this.props.date).startOf('month');\n\t\tfor (let i = 0; i < monday.daysInMonth(); i++) {\n\t\t\tconst dayState = this.context.getDay(monday.clone().add(i, 'days').toDate());\n\t\t\tdateRange.push(dayState);\n\t\t}\n\t\tconsole.log(dateRange.length);\n\t\treturn dateRange;\n\t}\n\n\tget title() {\n\t\tlet month = moment(this.props.date);\n\t\treturn <h5>Month {month.format('YYYY-MM')} total</h5>;\n\t}\n\n}\n\nexport const MonthTotal = debounceRender(MonthTotalComponent);\n","import React from 'react';\nimport './App.css';\nimport {DayTable} from \"./components/DayTable\";\nimport {Route, Router, Switch} from \"react-router-dom\";\nimport {createBrowserHistory} from 'history';\nimport {GlobalContext} from \"./state/GlobalContext\";\nimport {AppState} from \"./state/AppState\";\nimport {Header} from \"./components/Header\";\nimport moment from \"moment\";\nimport {DayTimeline} from \"./components/DayTimeline\";\nimport {WeekTotal} from \"./components/WeekTotal\";\nimport {MonthTotal} from \"./components/MonthTotal\";\n\nexport const history = createBrowserHistory();\n\nexport class App extends React.Component<any, any> {\n\n\tstatic contextType = GlobalContext;\n\t// @ts-ignore\n\tcontext: AppState;\n\n\tcomponentDidMount(): void {\n\t\tthis.context.subscribe(this.forceUpdate.bind(this));\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Router history={history}>\n\t\t\t\t<Header date={moment(this.context.date)}/>\n\t\t\t\t<main role=\"main\" className=\"container-fluid\">\n\t\t\t\t\t<div className=\"h-100\">\n\t\t\t\t\t\t<DayTimeline date={this.context.date}/>\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route path=\"/\" exact>\n\t\t\t\t\t\t\t\t<DayTable date={this.context.date}/>\n\t\t\t\t\t\t\t\t<div className=\"d-flex justify-content-between\">\n\t\t\t\t\t\t\t\t\t<WeekTotal date={this.context.date}/>\n\t\t\t\t\t\t\t\t\t<MonthTotal date={this.context.date}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</div>\n\t\t\t\t</main>\n\t\t\t\t<footer className=\"container-fluid\">\n\t\t\t\t\t<div className=\"inner\">\n\t\t\t\t\t\t&copy; 2020 <a href=\"https://github.com/spidgorny/\">Slawa</a>\n\t\t\t\t\t</div>\n\t\t\t\t</footer>\n\t\t\t</Router>\n\t\t);\n\t}\n\n\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}